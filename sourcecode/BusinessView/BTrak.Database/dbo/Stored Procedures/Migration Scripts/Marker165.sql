CREATE PROCEDURE [dbo].[Marker165]
(
    @CompanyId UNIQUEIDENTIFIER,
    @UserId UNIQUEIDENTIFIER,
    @RoleId UNIQUEIDENTIFIER
)
AS 
BEGIN 

    MERGE INTO [dbo].[CompanySettings] AS Target
    USING ( VALUES
       (NEWID(), @CompanyId, N'EnableAuditManagement', N'0',N'Key for enable or disable Audit', 1, GETDATE(), '242B3B99-CC2E-4967-997E-20DA8A253D8D')
        )
    AS Source ([Id], CompanyId ,[Key] ,[Value] ,[Description] , [IsVisible],[CreatedDateTime] ,[CreatedByUserId])
    ON Target.Id = Source.Id
    WHEN MATCHED THEN
    UPDATE SET CompanyId = Source.CompanyId,
         [Value] = Source.[Value],
         [Description] = Source.[Description],
         [IsVisible] = Source.[IsVisible]
    WHEN NOT MATCHED BY TARGET THEN
    INSERT ([Id], CompanyId ,[Key] ,[Value] ,[Description] , [IsVisible],[CreatedDateTime] ,[CreatedByUserId]) 
    VALUES ([Id], CompanyId ,[Key] ,[Value] ,[Description] , [IsVisible],[CreatedDateTime] ,[CreatedByUserId]);

    UPDATE AuditCompliance SET ProjectId = (SELECT Id FROM Project WHERE ProjectName = 'Audit compliance' AND CompanyId = @CompanyId)
    WHERE ProjectId IS NULL AND CompanyId = @CompanyId

    UPDATE AuditConduct SET ProjectId = (SELECT Id FROM Project WHERE ProjectName = 'Audit compliance' AND CompanyId = @CompanyId)
    WHERE ProjectId IS NULL AND AuditComplianceId IN (SELECT Id FROM AuditCompliance WHERE CompanyId = @CompanyId)

    UPDATE AuditFolder SET ProjectId = (SELECT Id FROM Project WHERE ProjectName = 'Audit compliance' AND CompanyId = @CompanyId)
    WHERE ProjectId IS NULL AND CompanyId = @CompanyId

     DELETE FROM [FeatureModule] WHERE FeatureId IN (
    '0555D9E1-9ACF-4154-8DDE-05EE0577A11B'
    ,'C9C51C20-F2E5-43A0-B334-064B6BA49ECC'
    ,'03DC536E-CA33-4C47-A22A-074AE83D3813'
    ,'04F61E30-61D2-415C-81E2-128157BA6D74'
    ,'6F5C8E92-B5D7-4038-A160-1FC745221DFD'
    ,'9CD93AB2-3854-42B6-B1B9-23651039E231'
    ,'707D00B2-47DB-455D-9A54-2454C23D8F60'
    ,'2B3655D5-98B2-4072-8A02-29860F828CC7'
    ,'CE4287D9-32EB-4870-9ECB-2C7EF0ADC0FC'
    ,'F0BFDB91-B65A-423A-AC44-34FDE9E65F96'
    ,'0F500B87-A510-4999-A42A-3685ADD2997F'
    ,'90E2FB23-D3BF-4224-AF46-3A80006E7F07'
    ,'DDF63B16-43F7-46DD-895C-4A88657EB37E'
    ,'B6225385-3B71-4065-9C90-5A64C76855BC'
    ,'7C2B0958-AD2C-4A9E-A03C-5CADF6F2C9E1'
    ,'BE08D051-8C45-4955-AB38-60B230F6B1DC'
    ,'1A9DA85D-1B2D-4CAC-AFBA-620B3C77ABA4'
    ,'A28A9ACD-2253-460D-923E-6710D81DCFF0'
    ,'9FFA7EB8-D094-4015-87B9-72CFBA703D98'
    ,'F834DEF5-C437-4C14-9CEC-90F686EE2A3D'
    ,'60994F55-5731-4A28-82EC-9A77399B4EAB'
    ,'225B86CC-18C1-4BE7-A0B2-AFAFAF6FC770'
    ,'B6154508-9345-4139-AB3B-B7D0B507B0D2'
    ,'153A2C6F-40EE-438E-8CF0-C499F30042AB'
    ,'ED85308F-3C2C-45B0-BBBE-DCB5AE10619D'
    ,'D7AA491F-52D0-4CA1-9AD3-DE125EB6287B'
    ,'58212141-93E5-4F9F-96B2-DE2E52B7409B'
    ,'07A844BB-DF2A-4105-B5DA-E40508567A3D'
    ,'3E9F78E8-3100-4A78-A7EB-E91D19A3DDBA'
    ,'23DA003F-D1FC-4AC5-B051-F1F1A4D9DD16'
    ,'9059F8F6-2056-49DD-BBDC-F298A17C57C1'
    ,N'3498AE43-7B62-4F2C-AA2F-578CEC4E3A97'
    )
     
     DELETE FROM RoleFeature WHERE FeatureId  IN (
    '0555D9E1-9ACF-4154-8DDE-05EE0577A11B'
    ,'C9C51C20-F2E5-43A0-B334-064B6BA49ECC'
    ,'03DC536E-CA33-4C47-A22A-074AE83D3813'
    ,'04F61E30-61D2-415C-81E2-128157BA6D74'
    ,'6F5C8E92-B5D7-4038-A160-1FC745221DFD'
    ,'9CD93AB2-3854-42B6-B1B9-23651039E231'
    ,'707D00B2-47DB-455D-9A54-2454C23D8F60'
    ,'2B3655D5-98B2-4072-8A02-29860F828CC7'
    ,'CE4287D9-32EB-4870-9ECB-2C7EF0ADC0FC'
    ,'F0BFDB91-B65A-423A-AC44-34FDE9E65F96'
    ,'0F500B87-A510-4999-A42A-3685ADD2997F'
    ,'90E2FB23-D3BF-4224-AF46-3A80006E7F07'
    ,'DDF63B16-43F7-46DD-895C-4A88657EB37E'
    ,'B6225385-3B71-4065-9C90-5A64C76855BC'
    ,'7C2B0958-AD2C-4A9E-A03C-5CADF6F2C9E1'
    ,'BE08D051-8C45-4955-AB38-60B230F6B1DC'
    ,'1A9DA85D-1B2D-4CAC-AFBA-620B3C77ABA4'
    ,'A28A9ACD-2253-460D-923E-6710D81DCFF0'
    ,'9FFA7EB8-D094-4015-87B9-72CFBA703D98'
    ,'F834DEF5-C437-4C14-9CEC-90F686EE2A3D'
    ,'60994F55-5731-4A28-82EC-9A77399B4EAB'
    ,'225B86CC-18C1-4BE7-A0B2-AFAFAF6FC770'
    ,'B6154508-9345-4139-AB3B-B7D0B507B0D2'
    ,'153A2C6F-40EE-438E-8CF0-C499F30042AB'
    ,'ED85308F-3C2C-45B0-BBBE-DCB5AE10619D'
    ,'D7AA491F-52D0-4CA1-9AD3-DE125EB6287B'
    ,'58212141-93E5-4F9F-96B2-DE2E52B7409B'
    ,'07A844BB-DF2A-4105-B5DA-E40508567A3D'
    ,'3E9F78E8-3100-4A78-A7EB-E91D19A3DDBA'
    ,'23DA003F-D1FC-4AC5-B051-F1F1A4D9DD16'
    ,'9059F8F6-2056-49DD-BBDC-F298A17C57C1'
    ,N'3498AE43-7B62-4F2C-AA2F-578CEC4E3A97'
    )
     
     DELETE FROM FeatureProcedureMapping WHERE FeatureId IN (
    '0555D9E1-9ACF-4154-8DDE-05EE0577A11B'
    ,'C9C51C20-F2E5-43A0-B334-064B6BA49ECC'
    ,'03DC536E-CA33-4C47-A22A-074AE83D3813'
    ,'04F61E30-61D2-415C-81E2-128157BA6D74'
    ,'6F5C8E92-B5D7-4038-A160-1FC745221DFD'
    ,'9CD93AB2-3854-42B6-B1B9-23651039E231'
    ,'707D00B2-47DB-455D-9A54-2454C23D8F60'
    ,'2B3655D5-98B2-4072-8A02-29860F828CC7'
    ,'CE4287D9-32EB-4870-9ECB-2C7EF0ADC0FC'
    ,'F0BFDB91-B65A-423A-AC44-34FDE9E65F96'
    ,'0F500B87-A510-4999-A42A-3685ADD2997F'
    ,'90E2FB23-D3BF-4224-AF46-3A80006E7F07'
    ,'DDF63B16-43F7-46DD-895C-4A88657EB37E'
    ,'B6225385-3B71-4065-9C90-5A64C76855BC'
    ,'7C2B0958-AD2C-4A9E-A03C-5CADF6F2C9E1'
    ,'BE08D051-8C45-4955-AB38-60B230F6B1DC'
    ,'1A9DA85D-1B2D-4CAC-AFBA-620B3C77ABA4'
    ,'A28A9ACD-2253-460D-923E-6710D81DCFF0'
    ,'9FFA7EB8-D094-4015-87B9-72CFBA703D98'
    ,'F834DEF5-C437-4C14-9CEC-90F686EE2A3D'
    ,'60994F55-5731-4A28-82EC-9A77399B4EAB'
    ,'225B86CC-18C1-4BE7-A0B2-AFAFAF6FC770'
    ,'B6154508-9345-4139-AB3B-B7D0B507B0D2'
    ,'153A2C6F-40EE-438E-8CF0-C499F30042AB'
    ,'ED85308F-3C2C-45B0-BBBE-DCB5AE10619D'
    ,'D7AA491F-52D0-4CA1-9AD3-DE125EB6287B'
    ,'58212141-93E5-4F9F-96B2-DE2E52B7409B'
    ,'07A844BB-DF2A-4105-B5DA-E40508567A3D'
    ,'3E9F78E8-3100-4A78-A7EB-E91D19A3DDBA'
    ,'23DA003F-D1FC-4AC5-B051-F1F1A4D9DD16'
    ,'9059F8F6-2056-49DD-BBDC-F298A17C57C1'
    ,N'3498AE43-7B62-4F2C-AA2F-578CEC4E3A97'
    )
     
     DELETE FROM ControllerApiFeature WHERE FeatureId IN (
    '0555D9E1-9ACF-4154-8DDE-05EE0577A11B'
    ,'C9C51C20-F2E5-43A0-B334-064B6BA49ECC'
    ,'03DC536E-CA33-4C47-A22A-074AE83D3813'
    ,'04F61E30-61D2-415C-81E2-128157BA6D74'
    ,'6F5C8E92-B5D7-4038-A160-1FC745221DFD'
    ,'9CD93AB2-3854-42B6-B1B9-23651039E231'
    ,'707D00B2-47DB-455D-9A54-2454C23D8F60'
    ,'2B3655D5-98B2-4072-8A02-29860F828CC7'
    ,'CE4287D9-32EB-4870-9ECB-2C7EF0ADC0FC'
    ,'F0BFDB91-B65A-423A-AC44-34FDE9E65F96'
    ,'0F500B87-A510-4999-A42A-3685ADD2997F'
    ,'90E2FB23-D3BF-4224-AF46-3A80006E7F07'
    ,'DDF63B16-43F7-46DD-895C-4A88657EB37E'
    ,'B6225385-3B71-4065-9C90-5A64C76855BC'
    ,'7C2B0958-AD2C-4A9E-A03C-5CADF6F2C9E1'
    ,'BE08D051-8C45-4955-AB38-60B230F6B1DC'
    ,'1A9DA85D-1B2D-4CAC-AFBA-620B3C77ABA4'
    ,'A28A9ACD-2253-460D-923E-6710D81DCFF0'
    ,'9FFA7EB8-D094-4015-87B9-72CFBA703D98'
    ,'F834DEF5-C437-4C14-9CEC-90F686EE2A3D'
    ,'60994F55-5731-4A28-82EC-9A77399B4EAB'
    ,'225B86CC-18C1-4BE7-A0B2-AFAFAF6FC770'
    ,'B6154508-9345-4139-AB3B-B7D0B507B0D2'
    ,'153A2C6F-40EE-438E-8CF0-C499F30042AB'
    ,'ED85308F-3C2C-45B0-BBBE-DCB5AE10619D'
    ,'D7AA491F-52D0-4CA1-9AD3-DE125EB6287B'
    ,'58212141-93E5-4F9F-96B2-DE2E52B7409B'
    ,'07A844BB-DF2A-4105-B5DA-E40508567A3D'
    ,'3E9F78E8-3100-4A78-A7EB-E91D19A3DDBA'
    ,'23DA003F-D1FC-4AC5-B051-F1F1A4D9DD16'
    ,'9059F8F6-2056-49DD-BBDC-F298A17C57C1'
    ,N'3498AE43-7B62-4F2C-AA2F-578CEC4E3A97'
    )
     
     DELETE FROM NotificationType WHERE FeatureId IN (
    '0555D9E1-9ACF-4154-8DDE-05EE0577A11B'
    ,'C9C51C20-F2E5-43A0-B334-064B6BA49ECC'
    ,'03DC536E-CA33-4C47-A22A-074AE83D3813'
    ,'04F61E30-61D2-415C-81E2-128157BA6D74'
    ,'6F5C8E92-B5D7-4038-A160-1FC745221DFD'
    ,'9CD93AB2-3854-42B6-B1B9-23651039E231'
    ,'707D00B2-47DB-455D-9A54-2454C23D8F60'
    ,'2B3655D5-98B2-4072-8A02-29860F828CC7'
    ,'CE4287D9-32EB-4870-9ECB-2C7EF0ADC0FC'
    ,'F0BFDB91-B65A-423A-AC44-34FDE9E65F96'
    ,'0F500B87-A510-4999-A42A-3685ADD2997F'
    ,'90E2FB23-D3BF-4224-AF46-3A80006E7F07'
    ,'DDF63B16-43F7-46DD-895C-4A88657EB37E'
    ,'B6225385-3B71-4065-9C90-5A64C76855BC'
    ,'7C2B0958-AD2C-4A9E-A03C-5CADF6F2C9E1'
    ,'BE08D051-8C45-4955-AB38-60B230F6B1DC'
    ,'1A9DA85D-1B2D-4CAC-AFBA-620B3C77ABA4'
    ,'A28A9ACD-2253-460D-923E-6710D81DCFF0'
    ,'9FFA7EB8-D094-4015-87B9-72CFBA703D98'
    ,'F834DEF5-C437-4C14-9CEC-90F686EE2A3D'
    ,'60994F55-5731-4A28-82EC-9A77399B4EAB'
    ,'225B86CC-18C1-4BE7-A0B2-AFAFAF6FC770'
    ,'B6154508-9345-4139-AB3B-B7D0B507B0D2'
    ,'153A2C6F-40EE-438E-8CF0-C499F30042AB'
    ,'ED85308F-3C2C-45B0-BBBE-DCB5AE10619D'
    ,'D7AA491F-52D0-4CA1-9AD3-DE125EB6287B'
    ,'58212141-93E5-4F9F-96B2-DE2E52B7409B'
    ,'07A844BB-DF2A-4105-B5DA-E40508567A3D'
    ,'3E9F78E8-3100-4A78-A7EB-E91D19A3DDBA'
    ,'23DA003F-D1FC-4AC5-B051-F1F1A4D9DD16'
    ,'9059F8F6-2056-49DD-BBDC-F298A17C57C1'
    ,N'3498AE43-7B62-4F2C-AA2F-578CEC4E3A97'
    )
     
     DELETE FROM Feature WHERE Id IN (
    '0555D9E1-9ACF-4154-8DDE-05EE0577A11B'
    ,'C9C51C20-F2E5-43A0-B334-064B6BA49ECC'
    ,'03DC536E-CA33-4C47-A22A-074AE83D3813'
    ,'04F61E30-61D2-415C-81E2-128157BA6D74'
    ,'6F5C8E92-B5D7-4038-A160-1FC745221DFD'
    ,'9CD93AB2-3854-42B6-B1B9-23651039E231'
    ,'707D00B2-47DB-455D-9A54-2454C23D8F60'
    ,'2B3655D5-98B2-4072-8A02-29860F828CC7'
    ,'CE4287D9-32EB-4870-9ECB-2C7EF0ADC0FC'
    ,'F0BFDB91-B65A-423A-AC44-34FDE9E65F96'
    ,'0F500B87-A510-4999-A42A-3685ADD2997F'
    ,'90E2FB23-D3BF-4224-AF46-3A80006E7F07'
    ,'DDF63B16-43F7-46DD-895C-4A88657EB37E'
    ,'B6225385-3B71-4065-9C90-5A64C76855BC'
    ,'7C2B0958-AD2C-4A9E-A03C-5CADF6F2C9E1'
    ,'BE08D051-8C45-4955-AB38-60B230F6B1DC'
    ,'1A9DA85D-1B2D-4CAC-AFBA-620B3C77ABA4'
    ,'A28A9ACD-2253-460D-923E-6710D81DCFF0'
    ,'9FFA7EB8-D094-4015-87B9-72CFBA703D98'
    ,'F834DEF5-C437-4C14-9CEC-90F686EE2A3D'
    ,'60994F55-5731-4A28-82EC-9A77399B4EAB'
    ,'225B86CC-18C1-4BE7-A0B2-AFAFAF6FC770'
    ,'B6154508-9345-4139-AB3B-B7D0B507B0D2'
    ,'153A2C6F-40EE-438E-8CF0-C499F30042AB'
    ,'ED85308F-3C2C-45B0-BBBE-DCB5AE10619D'
    ,'D7AA491F-52D0-4CA1-9AD3-DE125EB6287B'
    ,'58212141-93E5-4F9F-96B2-DE2E52B7409B'
    ,'07A844BB-DF2A-4105-B5DA-E40508567A3D'
    ,'3E9F78E8-3100-4A78-A7EB-E91D19A3DDBA'
    ,'23DA003F-D1FC-4AC5-B051-F1F1A4D9DD16'
    ,'9059F8F6-2056-49DD-BBDC-F298A17C57C1'
    ,N'3498AE43-7B62-4F2C-AA2F-578CEC4E3A97'
    )

   -- -DELETE FROM MenuItem WHERE Id = 'F46D2E60-4AD5-4882-BF54-C75BD26A0ED1'

END
GO